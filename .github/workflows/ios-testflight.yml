  steps:
    - uses: actions/checkout@v3
      with: submodules: true

    # ðŸ‘‰ Agrega esto:
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: 16

    - name: Install JS dependencies
      run: yarn install       # o npm install

    - name: Set up Ruby
      uses: ruby/setup-ruby@v1
      with:
        ruby-version: 3.1
        bundler-cache: true

    - name: Install Ruby gems & pods
      run: |
        bundle install
        bundle exec pod install --project-directory=ios --repo-update

      - name: Build & upload to TestFlight
        env:
          MATCH_GIT_URL:                     ${{ secrets.MATCH_GIT_URL }}
          MATCH_PASSWORD:                    ${{ secrets.MATCH_PASSWORD }}
          APP_STORE_CONNECT_API_KEY_KEY_ID:  ${{ secrets.APP_STORE_CONNECT_API_KEY_KEY_ID }}
          APP_STORE_CONNECT_API_KEY_ISSUER_ID: ${{ secrets.APP_STORE_CONNECT_API_KEY_ISSUER_ID }}
          APP_STORE_CONNECT_API_KEY_CONTENT: ${{ secrets.APP_STORE_CONNECT_API_KEY_CONTENT }}
        run: bundle exec fastlane beta
